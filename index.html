<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CyberSnake | Full Screen</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body, html {
            height: 100%;
            background: #000;
            color: #fff;
            font-family: 'Orbitron', sans-serif;
            overflow: hidden;
        }

        /* 3D Perspective Grid Background */
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: radial-gradient(circle at center, #1a0033 0%, #000 100%);
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .grid-overlay {
            position: absolute;
            width: 200%;
            height: 200%;
            background-image: 
                linear-gradient(to right, rgba(112, 0, 255, 0.2) 1px, transparent 1px),
                linear-gradient(to bottom, rgba(0, 242, 255, 0.2) 1px, transparent 1px);
            background-size: 60px 60px;
            transform: perspective(500px) rotateX(60deg);
            bottom: -50%;
            z-index: 1;
            animation: moveGrid 15s linear infinite;
        }

        @keyframes moveGrid {
            0% { background-position: 0 0; }
            100% { background-position: 0 600px; }
        }

        /* Top UI Panels */
        .header-ui {
            position: absolute;
            top: 30px;
            width: 90%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            z-index: 10;
        }

        .panel {
            background: rgba(35, 32, 201, 0.6);
            border: 2px solid #14b9e2;
            padding: 10px 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.4);
            font-size: 1.2rem;
            min-width: 180px;
            text-align: center;
        }

        .center-msg {
            border: 2px solid #7000ff;
            color: #fff;
            padding: 8px 20px;
            border-radius: 5px;
            font-size: 0.9rem;
            text-transform: uppercase;
        }

        /* Game Area */
        canvas {
            position: relative;
            z-index: 5;
            background: rgba(33, 62, 250, 0.158);
            border: 3px solid #7000ff;
            box-shadow: 0 0 40px rgba(112, 0, 255, 0.5);
        }

        /* Overlays */
        .screen-overlay {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
        }

        #pause-text {
            display: none;
            position: absolute;
            z-index: 15;
            font-size: 5rem;
            color: #00f2ff;
            text-shadow: 0 0 20px #00f2ff, 0 0 40px #00f2ff;
            pointer-events: none;
        }

        .btn-neon {
            padding: 15px 45px;
            background: transparent;
            border: 2px solid #00f2ff;
            color: #00f2ff;
            font-family: 'Orbitron', sans-serif;
            font-size: 1.5rem;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 0 15px rgba(0, 242, 255, 0.3);
        }

        .btn-neon:hover {
            background: #00f2ff;
            color: #000;
            box-shadow: 0 0 40px #00f2ff;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="grid-overlay"></div>

        <div class="header-ui">
            <div class="panel">SCORE: <span id="score">0</span></div>
            <div class="center-msg">SPACE TO PAUSE</div>
            <div class="panel">BEST: <span id="highScore">0</span></div>
        </div>

        <h1 id="pause-text">PAUSED</h1>

        <div id="menu" class="screen-overlay">
            <h1 style="font-size: 4rem; color: #00f2ff; margin-bottom: 20px; text-shadow: 0 0 20px #00f2ff;">CYBER SNAKE</h1>
            <button class="btn-neon" onclick="startGame()">INITIALIZE</button>
        </div>

        <div id="game-over" class="screen-overlay" style="display: none;">
            <h1 style="font-size: 4rem; color: #ff0055; margin-bottom: 10px;">TERMINATED</h1>
            <p id="final-score" style="font-size: 1.5rem; margin-bottom: 30px;">SCORE: 0</p>
            <button class="btn-neon" style="border-color: #ff0055; color: #ff0055;" onclick="startGame()">REBOOT</button>
        </div>

        <canvas id="gameCanvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        const scoreEl = document.getElementById("score");
        const highEl = document.getElementById("highScore");
        const pauseText = document.getElementById("pause-text");

        const grid = 25;
        let count = 0;
        let score = 0;
        let highScore = localStorage.getItem("cyberBest") || 0;
        highEl.innerText = highScore;

        let snake = {
            x: 150, y: 150,
            dx: grid, dy: 0,
            cells: [],
            maxCells: 4
        };

        let apple = { x: 300, y: 300 };
        let gameActive = false;
        let paused = false;

        function resize() {
            // Making canvas full screen responsive but maintaining grid alignment
            canvas.width = Math.floor((window.innerWidth * 0.8) / grid) * grid;
            canvas.height = Math.floor((window.innerHeight * 0.6) / grid) * grid;
        }
        window.onresize = resize;
        resize();

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function startGame() {
            document.getElementById("menu").style.display = "none";
            document.getElementById("game-over").style.display = "none";
            score = 0;
            scoreEl.innerText = score;
            snake.x = grid * 5;
            snake.y = grid * 5;
            snake.cells = [];
            snake.maxCells = 4;
            snake.dx = grid;
            snake.dy = 0;
            gameActive = true;
            paused = false;
            requestAnimationFrame(loop);
        }

        function loop() {
            if (!gameActive) return;
            if (paused) {
                requestAnimationFrame(loop);
                return;
            }

            // SLOW SPEED: Run only every 10 frames
            if (++count < 8) {
                requestAnimationFrame(loop);
                return;
            }
            count = 0;

            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Move snake
            snake.x += snake.dx;
            snake.y += snake.dy;

            // Wrap around edges (Full Screen Style)
            if (snake.x < 0) snake.x = canvas.width - grid;
            else if (snake.x >= canvas.width) snake.x = 0;
            if (snake.y < 0) snake.y = canvas.height - grid;
            else if (snake.y >= canvas.height) snake.y = 0;

            snake.cells.unshift({x: snake.x, y: snake.y});
            if (snake.cells.length > snake.maxCells) snake.cells.pop();

            // Draw Apple
            ctx.fillStyle = "#ff0055";
            ctx.shadowBlur = 20;
            ctx.shadowColor = "#ff0055";
            ctx.fillRect(apple.x + 2, apple.y + 2, grid - 4, grid - 4);

            // Draw Snake
            ctx.shadowBlur = 15;
            snake.cells.forEach((cell, index) => {
                ctx.fillStyle = (index === 0) ? "#00f2ff" : "#7000ff";
                ctx.shadowColor = (index === 0) ? "#00f2ff" : "#7000ff";
                ctx.fillRect(cell.x + 1, cell.y + 1, grid - 2, grid - 2);

                // Check collision with food
                if (cell.x === apple.x && cell.y === apple.y) {
                    snake.maxCells++;
                    score += 20;
                    scoreEl.innerText = score;
                    apple.x = getRandomInt(0, canvas.width / grid) * grid;
                    apple.y = getRandomInt(0, canvas.height / grid) * grid;
                }

                // Check collision with self
                for (let i = index + 1; i < snake.cells.length; i++) {
                    if (cell.x === snake.cells[i].x && cell.y === snake.cells[i].y) {
                        endGame();
                    }
                }
            });
            ctx.shadowBlur = 0;
            requestAnimationFrame(loop);
        }

        function endGame() {
            gameActive = false;
            document.getElementById("game-over").style.display = "flex";
            document.getElementById("final-score").innerText = "SCORE: " + score;
            if (score > highScore) {
                highScore = score;
                localStorage.setItem("cyberBest", highScore);
                highEl.innerText = highScore;
            }
        }

        document.addEventListener('keydown', function(e) {
            // Pause logic
            if (e.code === "Space") {
                paused = !paused;
                pauseText.style.display = paused ? "block" : "none";
            }

            // Direction logic (Prevents 180 degree turns)
            if (e.which === 37 && snake.dx === 0) { snake.dx = -grid; snake.dy = 0; }
            else if (e.which === 38 && snake.dy === 0) { snake.dy = -grid; snake.dx = 0; }
            else if (e.which === 39 && snake.dx === 0) { snake.dx = grid; snake.dy = 0; }
            else if (e.which === 40 && snake.dy === 0) { snake.dy = grid; snake.dx = 0; }
        });
    </script>
</body>
</html>